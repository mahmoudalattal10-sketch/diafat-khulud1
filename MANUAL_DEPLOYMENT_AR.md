# دليل الرفع اليدوي لمشروع Next.js على Hostinger (hPanel)

بما أنك تريد رفع الملفات يدوياً (Manual Upload) بعيداً عن GitHub، سنستخدم ميزة **Standalone Output** في Next.js. هذه الطريقة هي الأكثر كفاءة لأنها تجمع فقط الملفات الضرورية لتشغيل الموقع وتجعل حجم الرفع أصغر بكثير.

## الخطوة 1: بناء المشروع محلياً (على جهازك)

قبل الرفع، يجب تأهيل المشروع للإنتاج:

1.  تأكد أن ملف `next.config.mjs` يحتوي على `output: 'standalone'`. (لقدقمت بهذا بالفعل).
2.  افتح الـ Terminal في مجلد المشروع ونفذ:
    ```bash
    npm run build
    ```
3.  بعد الانتهاء، ستجد مجلداً جديداً ظهر باسم `.next/standalone`.

## الخطوة 2: تجهيز ملفات الرفع

مجلد `standalone` يحتوي على الكود البرمجي فقط، نحتاج لإضافة الملفات الثابتة إليه يدوياً:

1.  ادخل إلى مجلد `.next/standalone`.
2.  انسخ مجلد `public` من **الرئيسي** وضعه داخل `.next/standalone/`.
3.  انسخ مجلد `.next/static` من **الرئيسي** وضعه داخل `.next/standalone/.next/static`.
4.  قم بضغط **كل محتويات** مجلد `standalone` في ملف واحد بصيغة `.zip` (مثلاً `deploy.zip`).

> [!IMPORTANT]
> تأكد أنك ضغطت الملفات التي **بداخل** مجلد `standalone` مباشرة، ليكون ملف `server.js` في الواجهة عند فتح الـ zip.

## الخطوة 3: الرفع على Hostinger

1.  ادخل لوحة تحكم Hostinger (hPanel).
2.  اذهب إلى **Websites** -> **Manage** للموقع الخاص بك.
3.  ابحث عن **File Manager** وادخل إلى مجلد `public_html`.
4.  ارفع ملف `deploy.zip` وقم بفك الضغط (Extract) عنه داخل `public_html`.

## الخطوة 4: إعداد Node.js في لوحة التحكم

1.  في القائمة الجانبية لـ Hostinger، ابحث عن **Advanced** -> **Node.js**.
2.  قم بإعداد التطبيق كالتالي:
    - **Node.js Version**: اختر v20 (أو v18).
    - **Application Mode**: Production.
    - **Application Root**: `public_html`.
    - **Application Startup File**: `server.js`.
3.  اضغط **Create / Start**.

## الخطوة 5: متغيرات البيئة والقاعدة (.env)

1.  في **File Manager**، داخل `public_html` (حيث رفعت الملفات)، أنشئ ملفاً جديداً باسم `.env`.
2.  انسخ المتغيرات من جهازك (`.env.local`) وألصقها فيه.
3.  **بالنسبة لقاعدة البيانات (SQLite)**:
    - تأكد أن `DATABASE_URL` تشير لمسار صحيح، مثلاً: `DATABASE_URL="file:./database/dev.db"`.
    - تحتاج لرفع مجلد `prisma` (الذي يحتوي على السكيما) ومجلد قاعدة البيانات إذا كنت تريد نقل البيانات الحالية.
    - يُفضل تنفيذ `npx prisma db push` عبر SSH مرة واحدة لإنشاء الجداول في المكان الجديد.

## الخطوة 6: حماية قاعدة البيانات

لحماية ملف قاعدة البيانات من الوصول العام عبر المتصفح، أضف هذا الكود في ملف `.htaccess` داخل `public_html`:

```apache
<Files "*.db">
    Require all denied
</Files>
```

---
**نصيحة:** إذا كان المشروع كبيراً، يفضل استخدام **FileZilla** للرفع عبر **FTP/SFTP** بدلاً من مدير الملفات في المتصفح لتجنب انقطاع التحميل.
